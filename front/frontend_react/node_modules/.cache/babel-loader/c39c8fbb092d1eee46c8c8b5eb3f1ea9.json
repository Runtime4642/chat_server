{"ast":null,"code":"var assert = require('./assert');\n\nvar isTypeName = require('./isTypeName');\n\nvar isFunction = require('./isFunction');\n\nvar isMaybe = require('./isMaybe');\n\nvar isIdentity = require('./isIdentity');\n\nvar Any = require('./Any');\n\nvar create = require('./create');\n\nvar Nil = require('./Nil');\n\nvar forbidNewOperator = require('./forbidNewOperator');\n\nvar is = require('./is');\n\nvar getTypeName = require('./getTypeName');\n\nfunction getDefaultName(type) {\n  return '?' + getTypeName(type);\n}\n\nfunction maybe(type, name) {\n  if (isMaybe(type) || type === Any || type === Nil) {\n    // makes the combinator idempotent and handle Any, Nil\n    return type;\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    assert(isFunction(type), function () {\n      return 'Invalid argument type ' + assert.stringify(type) + ' supplied to maybe(type, [name]) combinator (expected a type)';\n    });\n    assert(isTypeName(name), function () {\n      return 'Invalid argument name ' + assert.stringify(name) + ' supplied to maybe(type, [name]) combinator (expected a string)';\n    });\n  }\n\n  var displayName = name || getDefaultName(type);\n  var identity = isIdentity(type);\n\n  function Maybe(value, path) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (identity) {\n        forbidNewOperator(this, Maybe);\n      }\n    }\n\n    return Nil.is(value) ? value : create(type, value, path);\n  }\n\n  Maybe.meta = {\n    kind: 'maybe',\n    type: type,\n    name: name,\n    identity: identity\n  };\n  Maybe.displayName = displayName;\n\n  Maybe.is = function (x) {\n    return Nil.is(x) || is(x, type);\n  };\n\n  return Maybe;\n}\n\nmaybe.getDefaultName = getDefaultName;\nmodule.exports = maybe;","map":null,"metadata":{},"sourceType":"script"}