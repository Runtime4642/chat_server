{"ast":null,"code":"var _jsxFileName = \"F:\\\\JAVA_WORKSPACE\\\\frontend_react-20191018T023535Z-001\\\\frontend_react\\\\src\\\\components\\\\Calendar\\\\Calendar.js\";\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport 'antd/dist/antd.css';\nimport { Calendar, Badge, ConfigProvider, Modal, Input, TimePicker, Alert } from 'antd';\nimport koKR from 'antd/lib/locale-provider/ko_KR';\nimport './Calendar.css';\nimport moment from 'moment';\nimport { ConsoleSqlOutlined } from '@ant-design/icons';\n\nclass CalendarClass extends Component {\n  constructor(props, context) {\n    super(props); // this.showModal = this.showModal.bind(this);\n\n    this.getListData = (value, data) => {\n      let listData = [];\n      if (data && data.length > 0) data.forEach(item => {\n        var month = \"\";\n        var day = \"\";\n        if (item.startDate.slice(5, 6) === \"0\") month = item.startDate.slice(6, 7);else month = item.startDate.slice(5, 7);\n        if (item.startDate.slice(8, 9) === \"0\") day = item.startDate.slice(9, 10);else day = item.startDate.slice(8, 10);\n\n        if (value.month() == month - 1 && value.date() == day) {\n          var startTime = \"\";\n          var endTime = \"\";\n          if (item.startDate && item.startDate.length > 12) startTime = item.startDate.slice(11, 16);\n          if (item.endDate && item.endDate.length > 12) endTime = item.endDate.slice(11, 16);\n          listData.push({\n            type: 'success',\n            content: item.location,\n            data: {\n              item\n            }\n          });\n          listData.push({\n            type: 'success',\n            content: startTime + \"~\" + endTime\n          });\n        }\n      });\n      return listData || [];\n    };\n\n    this.dateCellRender = (value, data) => {\n      const listData = this.getListData(value, data);\n      return /*#__PURE__*/React.createElement(\"ul\", {\n        className: \"events\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 5\n        }\n      }, listData.map(item => /*#__PURE__*/React.createElement(\"li\", {\n        key: item.content,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Badge, {\n        status: item.type,\n        text: item.content,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }\n      }))));\n    };\n\n    this.startTimeChange = value => {\n      this.setState({\n        startTime: value\n      });\n    };\n\n    this.endTimeChange = value => {\n      console.log(\"ennTIme\");\n      console.log(value);\n      this.setState({\n        endTime: value\n      });\n    };\n\n    this.saveData = value => {\n      console.log(\"onSelect\");\n      console.log(value);\n    };\n\n    this.hideModal = () => {\n      //visible=false;\n      this.setState({\n        visible: false\n      });\n    };\n\n    this.showModal = (value, mode, data, CalendarActions) => {\n      //달력 날짜를 클릭해서 모달을 띄울경우\n      if (this.state.currentMonth == value.month() + 1) {\n        this.setState({\n          visible: true,\n          location: null,\n          startTime: null,\n          endTime: null\n        });\n        let list = this.getListData(value, data);\n\n        if (list && list.length > 1) {\n          let splitData = list[1].content.split(\"~\");\n          this.setState({\n            startTime: moment(splitData[0], \"HH:mm\"),\n            endTime: moment(splitData[1], \"HH:mm\"),\n            location: list[0].content,\n            no: list[0].data.item.no,\n            date: value\n          });\n        }\n      } //달력 달을 변경시\n      else {\n          let mon = value.month() + 1;\n          if (\"0\" + mon == mon) CalendarActions.getData(value.year() + \"0\" + mon);else {\n            CalendarActions.getData(value.year() + mon);\n          }\n          this.setState({\n            currentMonth: value.month() + 1\n          });\n        }\n    };\n\n    this.okClick = CalendarActions => {\n      let startDate;\n      let endDate;\n\n      if (this.state.startTime && this.state.startTime._isAMomentObject) {\n        startDate = this.state.date.format(\"YYYY-MM-DD\") + \" \" + this.state.startTime.format(\"HH:mm:ss\");\n      }\n\n      if (this.state.endTime && this.state.endTime._isAMomentObject) {\n        endDate = this.state.date.format(\"YYYY-MM-DD\") + \" \" + this.state.endTime.format(\"HH:mm:ss\");\n      }\n\n      CalendarActions.saveData(this.state.no, startDate, endDate, this.state.location).then(function (response) {\n        if (response.status == 200) {\n          alert('저장성공');\n          console.log(response);\n          CalendarActions.getData(response.data.slice(0, 7).replace(\"-\", \"\"));\n        } else {\n          alert('저장실패');\n        }\n\n        console.log(response);\n      }).catch(function (error) {\n        console.log(error);\n      }); // let mon = value.month()+1;\n      // if(\"0\"+mon==mon)\n      // CalendarActions.getData(value.year()+\"0\"+mon);\n      // else\n      // {\n      //  CalendarActions.getData(value.year()+mon);\n      // }\n      // CalendarActions.getData(new Date().toISOString().slice(0,7).replace(\"-\",\"\"));\n\n      this.setState({\n        visible: false\n      });\n    };\n\n    this.locationChange = (value, data) => {\n      this.setState({\n        location: value.target.value\n      }); //  let list = this.getListData(value,data);\n      //  if(list && list.length>1){\n      //   let splitData = list[1].content.split(\"~\");\n      //   this.setState({\n      //     startTime:moment(splitData[0],\"HH:mm\"),\n      //     endTime:moment(splitData[1],\"HH:mm\"),\n      //     location: list[0].content,\n      //     no : list[0].data.item.no,\n      //     date:value\n      //   })\n      //  }\n    };\n\n    this.state = {\n      visible: false,\n      startTime: null,\n      endTime: null,\n      location: null,\n      no: null,\n      date: null,\n      currentMonth: new Date().toISOString().slice(5, 7)\n    };\n  }\n\n  render() {\n    const _this$props = this.props,\n          data = _this$props.data,\n          CalendarActions = _this$props.CalendarActions;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Calendar, {\n      dateCellRender: value => this.dateCellRender(value, data),\n      onSelect: (value, mode) => this.showModal(value, mode, data, CalendarActions),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Modal, {\n      title: \"Modal\",\n      visible: this.state.visible,\n      onCancel: () => {\n        this.hideModal();\n      },\n      onOk: () => {\n        this.okClick(CalendarActions);\n      },\n      okText: \"\\uC801\\uC6A9\",\n      cancelText: \"\\uB2EB\\uAE30\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      placeholder: \"Basic usage\",\n      value: this.state.location,\n      onChange: value => this.locationChange(value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 12\n      }\n    }), /*#__PURE__*/React.createElement(TimePicker, {\n      defaultValu: moment(\"00:00\", \"HH:mm\"),\n      format: \"HH:mm\",\n      value: this.state.startTime,\n      onChange: value => this.startTimeChange(value),\n      allowClear: \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 11\n      }\n    }), \"~\", /*#__PURE__*/React.createElement(TimePicker, {\n      defaultValu: moment(\"00:00\", \"HH:mm\"),\n      format: \"HH:mm\",\n      value: this.state.endTime,\n      onChange: value => this.endTimeChange(value),\n      allowClear: \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}\n\nexport default CalendarClass;","map":{"version":3,"sources":["F:/JAVA_WORKSPACE/frontend_react-20191018T023535Z-001/frontend_react/src/components/Calendar/Calendar.js"],"names":["React","Component","ReactDOM","Calendar","Badge","ConfigProvider","Modal","Input","TimePicker","Alert","koKR","moment","ConsoleSqlOutlined","CalendarClass","constructor","props","context","getListData","value","data","listData","length","forEach","item","month","day","startDate","slice","date","startTime","endTime","endDate","push","type","content","location","dateCellRender","map","startTimeChange","setState","endTimeChange","console","log","saveData","hideModal","visible","showModal","mode","CalendarActions","state","currentMonth","list","splitData","split","no","mon","getData","year","okClick","_isAMomentObject","format","then","response","status","alert","replace","catch","error","locationChange","target","Date","toISOString","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport 'antd/dist/antd.css';\r\nimport { Calendar, Badge,ConfigProvider,Modal ,Input,TimePicker,Alert  } from 'antd';\r\nimport koKR from 'antd/lib/locale-provider/ko_KR';\r\nimport './Calendar.css'\r\nimport moment from 'moment';\r\nimport { ConsoleSqlOutlined } from '@ant-design/icons';\r\n\r\nclass CalendarClass extends Component {\r\n\r\n  constructor(props, context) {\r\n    super(props);\r\n\r\n    // this.showModal = this.showModal.bind(this);\r\n\r\n   this.state = {\r\n    visible:false,\r\n    startTime:null,\r\n    endTime:null,\r\n    location:null,\r\n    no:null,\r\n    date:null,\r\n    currentMonth : new Date().toISOString().slice(5,7)\r\n    }\r\n}\r\n\r\n\r\n getListData = (value,data) => {\r\n  let listData=[];\r\n  \r\n  if(data && data.length > 0 )\r\n  data.forEach((item)=>{\r\n    var month=\"\";\r\n    var day =\"\";\r\n    \r\n    if( item.startDate.slice(5,6) === \"0\")\r\n         month= item.startDate.slice(6,7)\r\n    else\r\n          month = item.startDate.slice(5,7)\r\n\r\n      if( item.startDate.slice(8,9) === \"0\")\r\n          day= item.startDate.slice(9,10)\r\n     else\r\n          day = item.startDate.slice(8,10)     \r\n\r\n           \r\n    if(value.month() == month-1 && value.date()==day)\r\n    { \r\n      var startTime=\"\"\r\n      var endTime=\"\"\r\n          if(item.startDate && item.startDate.length>12)\r\n          startTime=item.startDate.slice(11,16);\r\n            if(item.endDate && item.endDate.length>12)\r\n            endTime=item.endDate.slice(11,16); \r\n      listData.push({type:'success',content:item.location,data:{item}})\r\n      listData.push({type:'success',content:startTime+\"~\"+endTime})\r\n    }\r\n  })\r\n\r\n\r\n  return listData || [];\r\n}\r\n\r\n dateCellRender=(value,data) => {\r\n const listData = this.getListData(value,data);\r\n\r\n\r\n \r\n\r\n  return (\r\n    <ul className=\"events\">\r\n      {listData.map(item => (\r\n        <li key={item.content}>\r\n          <Badge status={item.type} text={item.content} />\r\n        </li>\r\n      ))}\r\n    </ul>\r\n  );\r\n}\r\n\r\nstartTimeChange=(value)=>{\r\n  this.setState(\r\n    {\r\n      startTime:value\r\n    }\r\n  )\r\n\r\n}\r\n\r\nendTimeChange=(value)=>{\r\n  console.log(\"ennTIme\")\r\n  console.log(value)\r\n  this.setState(\r\n    {\r\n      endTime:value\r\n    }\r\n  )\r\n}\r\n\r\nsaveData=(value) => {\r\n  console.log(\"onSelect\");\r\n console.log(value);\r\n\r\n}\r\n\r\n\r\n hideModal = () => {\r\n  //visible=false;\r\n  this.setState({\r\n    visible: false,\r\n  });\r\n};\r\n\r\n\r\n showModal = (value,mode,data,CalendarActions) => {\r\n    //달력 날짜를 클릭해서 모달을 띄울경우\r\n  if(this.state.currentMonth == value.month()+1){\r\n  this.setState({\r\n    visible:true,\r\n    location:null,\r\n    startTime:null,\r\n    endTime:null\r\n  })\r\n   let list = this.getListData(value,data);\r\n   if(list && list.length>1){\r\n    let splitData = list[1].content.split(\"~\");\r\n    this.setState({\r\n      startTime:moment(splitData[0],\"HH:mm\"),\r\n      endTime:moment(splitData[1],\"HH:mm\"),\r\n      location: list[0].content,\r\n      no : list[0].data.item.no,\r\n      date : value\r\n    })\r\n   }\r\n\r\n\r\n  }\r\n  //달력 달을 변경시\r\n  else{\r\n    let mon = value.month()+1;\r\n    if(\"0\"+mon==mon)\r\n    CalendarActions.getData(value.year()+\"0\"+mon);\r\n    else\r\n    {\r\n     CalendarActions.getData(value.year()+mon);\r\n    }\r\n    this.setState({\r\n      currentMonth:value.month()+1\r\n    })\r\n  }\r\n\r\n};\r\nokClick=(CalendarActions)=>{\r\n  let startDate;\r\n  let endDate;\r\n\r\n    if(this.state.startTime&&this.state.startTime._isAMomentObject)\r\n    {\r\n      startDate=this.state.date.format(\"YYYY-MM-DD\")+\" \"+this.state.startTime.format(\"HH:mm:ss\")\r\n    }\r\n    if(this.state.endTime&& this.state.endTime._isAMomentObject)\r\n    {\r\n      endDate=this.state.date.format(\"YYYY-MM-DD\")+\" \"+this.state.endTime.format(\"HH:mm:ss\")\r\n    }\r\n    \r\n    CalendarActions.saveData(this.state.no,startDate,endDate,this.state.location)\r\n    .then(function (response) {\r\n      if(response.status == 200)\r\n      {\r\n        alert('저장성공');\r\n        console.log(response)\r\n        CalendarActions.getData(response.data.slice(0,7).replace(\"-\",\"\"));\r\n\r\n      }else{\r\n        alert('저장실패');\r\n      }\r\n      console.log(response);\r\n    })\r\n    .catch(function (error) {\r\n      console.log(error);\r\n    });\r\n\r\n    // let mon = value.month()+1;\r\n    // if(\"0\"+mon==mon)\r\n    // CalendarActions.getData(value.year()+\"0\"+mon);\r\n    // else\r\n    // {\r\n    //  CalendarActions.getData(value.year()+mon);\r\n    // }\r\n \r\n\r\n  // CalendarActions.getData(new Date().toISOString().slice(0,7).replace(\"-\",\"\"));\r\n  this.setState({\r\n    visible:false\r\n  })\r\n}\r\n\r\nlocationChange = (value,data) => {\r\n\r\n  this.setState({\r\n    location:value.target.value\r\n  })\r\n  //  let list = this.getListData(value,data);\r\n  //  if(list && list.length>1){\r\n  //   let splitData = list[1].content.split(\"~\");\r\n  //   this.setState({\r\n  //     startTime:moment(splitData[0],\"HH:mm\"),\r\n  //     endTime:moment(splitData[1],\"HH:mm\"),\r\n  //     location: list[0].content,\r\n  //     no : list[0].data.item.no,\r\n  //     date:value\r\n  //   })\r\n  //  }\r\n\r\n};\r\n\r\n\r\n\r\n  render() {\r\n    const{data,CalendarActions} = this.props;\r\n\r\n\r\n    return(\r\n        <div>\r\n          <Calendar dateCellRender={(value)=>this.dateCellRender(value,data)} onSelect={(value,mode)=>this.showModal(value,mode,data,CalendarActions)}/>\r\n          <Modal\r\n            title=\"Modal\"\r\n            visible={this.state.visible}\r\n            onCancel={()=>{this.hideModal()}}\r\n            onOk={()=>{this.okClick(CalendarActions)}}\r\n            okText=\"적용\"\r\n            cancelText=\"닫기\"\r\n          ><Input placeholder=\"Basic usage\" value={this.state.location}  onChange={(value)=>this.locationChange(value)}/>\r\n          <TimePicker  defaultValu={moment(\"00:00\",\"HH:mm\")} format={\"HH:mm\"} value={this.state.startTime} onChange={(value)=>this.startTimeChange(value)} allowClear={\"true\"}/>~\r\n          <TimePicker   defaultValu={moment(\"00:00\",\"HH:mm\")} format={\"HH:mm\"} value={this.state.endTime}  onChange={(value)=>this.endTimeChange(value)} allowClear={\"true\"}/>\r\n          </Modal>\r\n          {/* <Alert message=\"저장성공\" type=\"success\" showIcon={this.state.visibleSuccessAlert} banner={false} />\r\n          <Alert message=\"에러\" type=\"error\" showIcon={this.state.visibleSuccessAlert} banner/> */}\r\n        </div>\r\n  \r\n    );\r\n  };\r\n}\r\n\r\nexport default CalendarClass;"]},"metadata":{},"sourceType":"module"}